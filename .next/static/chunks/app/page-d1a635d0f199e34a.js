(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2588:(e,a,t)=>{Promise.resolve().then(t.bind(t,9176))},9176:(e,a,t)=>{"use strict";t.d(a,{default:()=>C});var r=t(5155),s=t(2115),i=t(1290),n=t(1027),l=t(3463),o=t(9795);function d(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,o.QP)((0,l.$)(a))}let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=s.forwardRef((e,a)=>{let{className:t,variant:s,size:n,asChild:l=!1,...o}=e,u=l?i.DX:"button";return(0,r.jsx)(u,{className:d(c({variant:s,size:n,className:t})),ref:a,...o})});u.displayName="Button";let m=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:d("rounded-xl border bg-card text-card-foreground shadow",t),...s})});m.displayName="Card";let f=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:d("flex flex-col space-y-1.5 p-6",t),...s})});f.displayName="CardHeader";let p=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:d("font-semibold leading-none tracking-tight",t),...s})});p.displayName="CardTitle",s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:d("text-sm text-muted-foreground",t),...s})}).displayName="CardDescription";let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:d("p-6 pt-0",t),...s})});x.displayName="CardContent";let g=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("div",{ref:a,className:d("flex items-center p-6 pt-0",t),...s})});g.displayName="CardFooter";let h=s.forwardRef((e,a)=>{let{className:t,type:s,...i}=e;return(0,r.jsx)("input",{type:s,className:d("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...i})});h.displayName="Input";let y=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)("textarea",{className:d("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:a,...s})});y.displayName="Textarea";var b=t(8684),v=t(4505),w=t(2627),j=t(2316),N=t(8667),k=t(5683);let C=()=>{let[e,a]=(0,s.useState)(null),[t,i]=(0,s.useState)(""),[n,l]=(0,s.useState)(!1),[o,d]=(0,s.useState)(""),[c,C]=(0,s.useState)([]),A=async()=>{if(!e){i("Please select an audio file to upload.");return}l(!0),i("");let a=new FormData;a.append("audio",e);try{let e=await fetch("/api/whisper",{method:"POST",body:a});if(!e.ok)throw Error("Failed to transcribe audio.");let t=await e.json();console.log(t),t&&t.transcription?d(t.transcription):i("Transcription not found in the response.")}catch(e){e instanceof Error?i(e.message):i("An unknown error occurred.")}finally{l(!1)}},P=async()=>{if(!o){i("No transcription available to generate an image.");return}l(!0),i("");try{let e=await fetch("/api/flux1",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:o})});if(!e.ok)throw Error("Failed to generate images.");let a=await e.json();a&&a.imageUrls?C(a.imageUrls):i("Image generation failed.")}catch(e){e instanceof Error?i(e.message):i("An unknown error occurred.")}finally{l(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center p-4",children:(0,r.jsxs)(m,{className:"w-full max-w-2xl bg-gray-800 text-gray-100 shadow-xl",children:[(0,r.jsx)(f,{children:(0,r.jsx)(p,{className:"text-3xl font-bold text-center bg-gradient-to-r from-blue-400 to-purple-500 text-transparent bg-clip-text",children:"Audio Transcription & Image Generation"})}),(0,r.jsxs)(x,{className:"space-y-6",children:[(0,r.jsx)(N.P.div,{className:"flex items-center justify-center w-full",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,r.jsxs)("label",{htmlFor:"audio-upload",className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed rounded-lg cursor-pointer bg-gray-700 border-gray-600 hover:border-blue-500 hover:bg-gray-600 transition-all duration-300",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,r.jsx)(b.A,{className:"w-10 h-10 mb-3 text-gray-400"}),(0,r.jsxs)("p",{className:"mb-2 text-sm text-gray-400",children:[(0,r.jsx)("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Audio files (MP3, WAV, etc.)"})]}),(0,r.jsx)(h,{id:"audio-upload",type:"file",accept:"audio/*",className:"hidden",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];r&&r.type.startsWith("audio/")?(a(r),i("")):i("Please upload a valid audio file.")}})]})}),(0,r.jsx)(k.N,{children:e&&(0,r.jsxs)(N.P.p,{className:"text-sm text-gray-400 text-center",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:["Selected file: ",e.name]})}),t&&(0,r.jsx)(N.P.p,{className:"text-red-400 text-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},children:t}),(0,r.jsx)(u,{onClick:A,disabled:n||!e,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Transcribing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Transcribe Audio"]})}),(0,r.jsx)(k.N,{children:o&&(0,r.jsxs)(N.P.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.5},children:[(0,r.jsx)(y,{value:o,readOnly:!0,className:"min-h-[100px] resize-none bg-gray-700 text-gray-100 border-gray-600",placeholder:"Transcription will appear here..."}),(0,r.jsx)(u,{onClick:P,disabled:n,className:"w-full bg-purple-600 hover:bg-purple-700 text-white",children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating Image..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"Generate Image"]})})]})})]}),(0,r.jsx)(g,{className:"flex flex-wrap justify-center gap-4",children:(0,r.jsx)(k.N,{children:c.map((e,a)=>(0,r.jsx)(N.P.img,{src:e,alt:"Generated based on transcription ".concat(a+1),className:"max-w-full h-auto rounded-lg shadow-lg",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.5,delay:.1*a}},a))})})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[474,441,517,358],()=>a(2588)),_N_E=e.O()}]);