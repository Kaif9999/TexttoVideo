(()=>{var e={};e.id=559,e.ids=[559],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},5743:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>c,serverHooks:()=>d,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{POST:()=>u});var o=r(2706),a=r(8203),n=r(5994),i=r(9187);async function u(e){try{let{lyrics:t}=await e.json();if(!t)return i.NextResponse.json({error:"Lyrics are required to generate music."},{status:400});let r=t.join(" "),s=process.env.PIAPI_API_KEY||"",o=async(e,t)=>{let o=0;for(;o<e;){try{let e=await fetch("https://api.piapi.ai/api/v1/task",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":s},body:JSON.stringify({model:"music-u",task_type:"music_generation",input:{prompt:r,lyrics_type:"user",seed:Math.floor(1e9*Math.random())}})}),t=await e.json();function a(e){let t=()=>{fetch(`https://api.piapi.ai/api/v1/task/${e}`,{method:"GET",headers:{"Content-Type":"application/json","x-api-key":s}}).then(e=>e.json()).then(e=>{if(console.log("Task Status:",e),"failed"===e.status){console.error("Task failed.");return}if("success"===e.status){console.log("Task succeeded:",e);return}console.log("Retrying..."),setTimeout(t,5e3)}).catch(e=>{console.error("Error while checking task status:",e)})};t()}if(console.log(t.data.task_id),console.log(t),a(t.data.task_id),console.log(a),console.log(`Attempt ${o+1}:`,t),e.ok&&t?.data?.output?.musicUrl)return{success:!0,musicUrl:t.data.output.musicUrl};console.warn(`Attempt ${o+1} failed. Retrying...`)}catch(e){console.error(`Error on attempt ${o+1}:`,e)}++o<e&&await new Promise(e=>setTimeout(e,t))}return{success:!1,error:"Failed to generate music after retries."}},a=await o(10,5e3);if(!a.success)return i.NextResponse.json({error:a.error},{status:500});return i.NextResponse.json({message:"Music generated successfully!",musicUrl:a.musicUrl})}catch(e){return console.error("Error in /api/suno:",e),i.NextResponse.json({error:"Internal server error."},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/suno/route",pathname:"/api/suno",filename:"route",bundlePath:"app/api/suno/route"},resolvedPagePath:"/home/kaif9999/genvr/TexttoVideo/src/app/api/suno/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:p,workUnitAsyncStorage:l,serverHooks:d}=c;function m(){return(0,n.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:l})}},6487:()=>{},8335:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[989,452],()=>r(5743));module.exports=s})();